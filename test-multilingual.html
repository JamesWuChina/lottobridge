<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>多语言功能测试 - LottoBridge</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .header {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            text-align: center;
        }
        .language-selector {
            margin: 20px 0;
            text-align: center;
        }
        .language-selector select {
            padding: 10px 15px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 5px;
            background: white;
        }
        .test-section {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-section h3 {
            color: #1a3e8c;
            margin-top: 0;
        }
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .demo-text {
            background: #e9ecef;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        [dir="rtl"] {
            text-align: right;
        }
        [dir="rtl"] .language-selector {
            text-align: center;
        }
    </style>
    <script src="js/languages.js"></script>
</head>
<body>
    <div class="header">
        <h1>LottoBridge 多语言功能测试</h1>
        <p>这个页面用于测试多语言系统的各项功能</p>
    </div>

    <div class="language-selector">
        <label for="lang-select">选择语言 / Choose Language:</label><br><br>
        <select id="lang-select">
            <option value="zh">中文</option>
            <option value="en">English</option>
            <option value="fr">Français</option>
            <option value="es">Español</option>
            <option value="ko">한국어</option>
            <option value="ar">العربية</option>
            <option value="ru">Русский</option>
        </select>
    </div>

    <div class="test-section">
        <h3>1. 语言数据加载测试</h3>
        <div id="language-data-status" class="status">检查中...</div>
        <div id="supported-languages"></div>
    </div>

    <div class="test-section">
        <h3>2. 翻译功能测试</h3>
        <div id="translation-status" class="status">检查中...</div>
        <div class="demo-text">
            <strong>导航栏首页:</strong> <span id="nav-home-text">-</span><br>
            <strong>英雄标题:</strong> <span id="hero-title-text">-</span><br>
            <strong>联系我们:</strong> <span id="contact-text">-</span>
        </div>
    </div>

    <div class="test-section">
        <h3>3. RTL支持测试</h3>
        <div id="rtl-status" class="status">检查中...</div>
        <p>当选择阿拉伯语时，页面应该从右到左显示</p>
    </div>

    <div class="test-section">
        <h3>4. 本地存储测试</h3>
        <div id="storage-status" class="status">检查中...</div>
        <p>语言选择应该保存到浏览器本地存储中</p>
    </div>

    <div class="test-section">
        <h3>5. 实时切换测试</h3>
        <div id="switch-status" class="status">请选择不同语言测试</div>
        <p>切换语言时，所有文本应该立即更新</p>
    </div>

    <script>
        class MultilingualTester {
            constructor() {
                this.currentLang = 'zh';
                this.init();
            }

            init() {
                this.testLanguageDataLoading();
                this.testTranslationFunction();
                this.testRTLSupport();
                this.testLocalStorage();
                this.setupLanguageSelector();
            }

            testLanguageDataLoading() {
                const statusEl = document.getElementById('language-data-status');
                const supportedEl = document.getElementById('supported-languages');
                
                if (typeof window.languages !== 'undefined' && window.languages) {
                    const langs = Object.keys(window.languages);
                    statusEl.className = 'status success';
                    statusEl.textContent = '✅ 语言数据加载成功';
                    supportedEl.innerHTML = `<strong>支持的语言:</strong> ${langs.join(', ')}`;
                } else {
                    statusEl.className = 'status error';
                    statusEl.textContent = '❌ 语言数据加载失败';
                }
            }

            testTranslationFunction() {
                const statusEl = document.getElementById('translation-status');
                
                try {
                    const zhData = window.languages.zh;
                    if (zhData && zhData.nav && zhData.hero) {
                        statusEl.className = 'status success';
                        statusEl.textContent = '✅ 翻译数据结构正确';
                        this.updateTranslationDemo('zh');
                    } else {
                        throw new Error('翻译数据结构不完整');
                    }
                } catch (error) {
                    statusEl.className = 'status error';
                    statusEl.textContent = '❌ 翻译功能测试失败: ' + error.message;
                }
            }

            testRTLSupport() {
                const statusEl = document.getElementById('rtl-status');
                
                // 测试阿拉伯语数据是否存在
                if (window.languages && window.languages.ar) {
                    statusEl.className = 'status success';
                    statusEl.textContent = '✅ RTL语言数据存在，请选择阿拉伯语测试';
                } else {
                    statusEl.className = 'status error';
                    statusEl.textContent = '❌ RTL语言数据缺失';
                }
            }

            testLocalStorage() {
                const statusEl = document.getElementById('storage-status');
                
                try {
                    // 测试localStorage是否可用
                    localStorage.setItem('test', 'test');
                    localStorage.removeItem('test');
                    statusEl.className = 'status success';
                    statusEl.textContent = '✅ 本地存储功能可用';
                } catch (error) {
                    statusEl.className = 'status error';
                    statusEl.textContent = '❌ 本地存储功能不可用';
                }
            }

            setupLanguageSelector() {
                const selector = document.getElementById('lang-select');
                selector.addEventListener('change', (e) => {
                    const newLang = e.target.value;
                    this.switchLanguage(newLang);
                });
            }

            switchLanguage(langCode) {
                const switchStatusEl = document.getElementById('switch-status');
                
                try {
                    if (window.languages[langCode]) {
                        this.currentLang = langCode;
                        this.updateTranslationDemo(langCode);
                        this.updateRTL(langCode);
                        
                        switchStatusEl.className = 'status success';
                        switchStatusEl.textContent = `✅ 成功切换到 ${langCode}`;
                        
                        // 测试本地存储
                        localStorage.setItem('test_language', langCode);
                    } else {
                        throw new Error('语言数据不存在');
                    }
                } catch (error) {
                    switchStatusEl.className = 'status error';
                    switchStatusEl.textContent = '❌ 语言切换失败: ' + error.message;
                }
            }

            updateTranslationDemo(langCode) {
                const data = window.languages[langCode];
                if (data) {
                    document.getElementById('nav-home-text').textContent = data.nav.home;
                    document.getElementById('hero-title-text').textContent = data.hero.title;
                    document.getElementById('contact-text').textContent = data.nav.contact;
                }
            }

            updateRTL(langCode) {
                if (langCode === 'ar') {
                    document.documentElement.dir = 'rtl';
                    document.getElementById('rtl-status').className = 'status success';
                    document.getElementById('rtl-status').textContent = '✅ RTL模式已激活';
                } else {
                    document.documentElement.dir = 'ltr';
                    if (document.getElementById('rtl-status').className.includes('success')) {
                        document.getElementById('rtl-status').textContent = '✅ RTL测试完成，已切换回LTR模式';
                    }
                }
            }
        }

        // 页面加载完成后启动测试
        document.addEventListener('DOMContentLoaded', function() {
            new MultilingualTester();
        });
    </script>
</body>
</html>